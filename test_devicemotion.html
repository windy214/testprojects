<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>HTML5 手机摇一摇</title>
<script type="text/javascript">
var i = 0;
var color = new Array('#fff', '#ff0', '#f00', '#000', '#00f', '#0ff');
function addShakeListener(){
if(window.DeviceMotionEvent) {
	var speed = document.getElementById("speed").value;
	var x = y = z = lastX = lastY = lastZ = 0;
	window.addEventListener('devicemotion', function(){
		var acceleration =event.accelerationIncludingGravity;
		document.getElementById("gravity").value = acceleration;
		x = acceleration.x;
		y = acceleration.y;
		z = acceleration.z;
		
		document.getElementById("gravity_x").value = x;
		document.getElementById("gravity_y").value = y;
		document.getElementById("gravity_z").value = z;
		if(Math.abs(x-lastX) > speed || Math.abs(y-lastY) > speed) {
		//if(Math.abs(x-lastX) == (Math.abs(x) + Math.abs(lastX)) || Math.abs(y-lastY) == (Math.abs(y) + Math.abs(lastY))) {
			i += parseInt(1);//自加变量
			var txt = document.getElementById("txt");//获取text属性
			txt.value = i;//将次数i赋值给text
			document.body.style.backgroundColor = color[Math.round(Math.random()*10)%6];
		}
		lastX = x;
		lastY = y;
	}, false);
}
}
</script>
</head>
<body>
<input type="number" id="speed" value="25"/>
<input type="number" name="txt" id="txt" value="0" />次
HTML 5 手机摇一摇，在手机上运行的。
devicemotion api 
<input type="number" id="gravity" value="0"/>
<input type="number" id="gravity_x" value="0"/>
<input type="number" id="gravity_y" value="0"/>
<input type="number" id="gravity_z" value="0"/>
<input type="button" id="" value="添加监听事件" onclick="addShakeListener()" />
</body>
</html>